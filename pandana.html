

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Using an UrbanAccess network with Pandana &mdash; UrbanAccess 0.2.2 documentation</title>
  

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />

  
  
  
  

  
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Network Gallery" href="gallery.html" />
    <link rel="prev" title="Utilities" href="utilities.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="index.html" class="icon icon-home" alt="Documentation Home"> UrbanAccess
          

          
          </a>

          
            
            
              <div class="version">
                0.2.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction and Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="data_loaders.html">Download and Load Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="integrated_network.html">Create an Integrated Transit and Street Network</a></li>
<li class="toctree-l1"><a class="reference internal" href="plot.html">Plot Networks</a></li>
<li class="toctree-l1"><a class="reference internal" href="utilities.html">Utilities</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using an UrbanAccess network with Pandana</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#examples-of-using-an-urbanaccess-network-with-pandana">Examples of using an UrbanAccess network with Pandana</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples-of-pandana-results-using-an-urbanaccess-network">Examples of Pandana results using an UrbanAccess network</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="gallery.html">Network Gallery</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">UrbanAccess</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html" class="icon icon-home"></a> &raquo;</li>
        
      <li>Using an UrbanAccess network with Pandana</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/pandana.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="using-an-urbanaccess-network-with-pandana">
<span id="pandana-section"></span><h1>Using an UrbanAccess network with Pandana<a class="headerlink" href="#using-an-urbanaccess-network-with-pandana" title="Permalink to this headline">¶</a></h1>
<p>Pandana (Pandas Network Analysis) is a tool to compute network accessibility metrics. If you have used UrbanAccess to generate your integrated transit and pedestrian network, it has already been formatted for use with Pandana and you can use Pandana right away to compute accessibility metrics.</p>
<p>There are a couple of important reminders about using an UrbanAccess network with Pandana:</p>
<ul class="simple">
<li><p>By default, UrbanAccess generates a one way network. One way means there is an explicit edge for each direction in the edge table. Where applicable, it is important to set any Pandana <code class="docutils literal notranslate"><span class="pre">two_way</span></code> parameters to <code class="docutils literal notranslate"><span class="pre">False</span></code> (they are <code class="docutils literal notranslate"><span class="pre">True</span></code> by default) to indicate that the network is a one way network.</p></li>
<li><p>As of Pandana v0.3.0, <code class="docutils literal notranslate"><span class="pre">node</span> <span class="pre">ids</span></code> and <code class="docutils literal notranslate"><span class="pre">from</span></code> and <code class="docutils literal notranslate"><span class="pre">to</span></code> columns in your network must be integer type and not string. UrbanAccess automatically generates both string and integer types so use the <code class="docutils literal notranslate"><span class="pre">from_int</span></code> and <code class="docutils literal notranslate"><span class="pre">to_int</span></code> columns in edges and the index in nodes <code class="docutils literal notranslate"><span class="pre">id_int</span></code>.</p></li>
<li><p>UrbanAccess by default will generate edge weights in the column <code class="docutils literal notranslate"><span class="pre">weight</span></code> that represent travel time in units of minutes. Even though Pandana’s impedance parameters are sometimes called <code class="docutils literal notranslate"><span class="pre">distance</span></code> you can use units of minutes here.</p></li>
</ul>
<p>For reporting issues related to Pandana and for Pandana documentation see the <a class="reference external" href="https://github.com/UDST/pandana">Pandana repo</a> directly.</p>
<div class="section" id="examples-of-using-an-urbanaccess-network-with-pandana">
<h2>Examples of using an UrbanAccess network with Pandana<a class="headerlink" href="#examples-of-using-an-urbanaccess-network-with-pandana" title="Permalink to this headline">¶</a></h2>
<p>The examples below only depict isolated code snippets to provide a general idea of how each function can be parametrized. See the demo for a full workflow.</p>
<p>Creating a Pandana Network object:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">transit_ped_net</span> <span class="o">=</span> <span class="n">pdna</span><span class="o">.</span><span class="n">Network</span><span class="p">(</span><span class="n">integrated_ua_net</span><span class="o">.</span><span class="n">net_nodes</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">],</span>
                               <span class="n">integrated_ua_net</span><span class="o">.</span><span class="n">net_nodes</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span>
                               <span class="n">integrated_ua_net</span><span class="o">.</span><span class="n">net_edges</span><span class="p">[</span><span class="s2">&quot;from_int&quot;</span><span class="p">],</span>
                               <span class="n">integrated_ua_net</span><span class="o">.</span><span class="n">net_edges</span><span class="p">[</span><span class="s2">&quot;to_int&quot;</span><span class="p">],</span>
                               <span class="n">integrated_ua_net</span><span class="o">.</span><span class="n">net_edges</span><span class="p">[[</span><span class="s2">&quot;weight&quot;</span><span class="p">]],</span>
                               <span class="n">twoway</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Running an aggregation query using a total number of jobs variable for a travel time threshold of 45 minutes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">jobs_45</span> <span class="o">=</span> <span class="n">transit_ped_net</span><span class="o">.</span><span class="n">aggregate</span><span class="p">(</span><span class="mi">45</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s1">&#39;sum&#39;</span><span class="p">,</span> <span class="n">decay</span><span class="o">=</span><span class="s1">&#39;linear&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;jobs&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Running a nearest POI query to parks with a travel time threshold of 45 minutes:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">nearest_parks</span> <span class="o">=</span> <span class="n">transit_ped_net</span><span class="o">.</span><span class="n">nearest_pois</span><span class="p">(</span><span class="n">distance</span><span class="o">=</span><span class="mi">45</span><span class="p">,</span> <span class="n">category</span><span class="o">=</span><span class="s2">&quot;parks&quot;</span><span class="p">,</span> <span class="n">num_pois</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">max_distance</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="examples-of-pandana-results-using-an-urbanaccess-network">
<h2>Examples of Pandana results using an UrbanAccess network<a class="headerlink" href="#examples-of-pandana-results-using-an-urbanaccess-network" title="Permalink to this headline">¶</a></h2>
<p>Examples of a Pandana accessibility to jobs aggregation query in Oakland, CA using an UrbanAccess integrated transit and pedestrian network for three travel time thresholds 15, 30, and 45 minutes (Note: these plots are generated using Pandana’s plot functions and are plotting the network nodes.)</p>
<p><strong>Jobs accessible within 15 minutes</strong>
<a class="reference internal" href="_images/15_min_jobs.png"><img alt="15min" src="_images/15_min_jobs.png" style="width: 709px;" /></a></p>
<p><strong>Jobs accessible within 30 minutes</strong>
<a class="reference internal" href="_images/30_min_jobs.png"><img alt="30min" src="_images/30_min_jobs.png" style="width: 714px;" /></a></p>
<p><strong>Jobs accessible within 45 minutes</strong>
<a class="reference internal" href="_images/45_min_jobs.png"><img alt="45min" src="_images/45_min_jobs.png" style="width: 714px;" /></a></p>
<p>Examples of a Pandana nearest POI query to hospitals and parks within a 30 minute travel time in Oakland, CA using an UrbanAccess integrated transit and pedestrian network (Note: these plots are generated using Pandana’s plot functions and are plotting the network nodes.)</p>
<p><strong>Travel time to nearest hospital within 30 minutes</strong>
<a class="reference internal" href="_images/hospitals_30.png"><img alt="hospitals" src="_images/hospitals_30.png" style="width: 695px;" /></a></p>
<p><strong>Travel time to nearest park within 30 minutes</strong>
<a class="reference internal" href="_images/parks_30.png"><img alt="parks" src="_images/parks_30.png" style="width: 695px;" /></a></p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="gallery.html" class="btn btn-neutral float-right" title="Network Gallery" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="utilities.html" class="btn btn-neutral float-left" title="Utilities" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        
        &copy; Copyright 2020, UrbanSim Inc.

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>